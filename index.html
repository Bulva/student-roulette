<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <title>Student roulette</title>
</head>
<body>
<div class="container" style="margin-top: 40px;">
    <div class="row">
        <div class="col-lg-8">
            <img id="mem" src="" style="width: 100%" />
            <h2 id="student-name" style="text-align: center;"></h2>
        </div>
        <div class="col-lg-4">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Jméno</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td id="0">Jana Ambrúzsová</td>
                </tr>
                <tr>
                    <td id="1">Martina Faltejsková</td>
                </tr>
                <tr>
                    <td id="2">Milan Fila</td>
                </tr>
                <tr>
                    <td id="3">Veronika Kneblová</td>
                </tr>
                <tr>
                    <td id="4">Jakub Kučera</td>
                </tr>
                <tr>
                    <td id="5">Jana Martincová</td>
                </tr>
                <tr>
                    <td id="6">Jan Sikora</td>
                </tr>
                <tr>
                    <td id="7">Kateřina Trojanová</td>
                </tr>
                </tbody>
            </table>

            <button id="draw-student" type="button" class="btn-lg btn-danger">Let the game begin!</button>
        </div>
    </div>
</div>

<script>
    let drawnImages = {};
    let images = [
        'family.jpg',
        'family_guy.jpg',
        'friends.gif',
        'jolanda.jpg',
        'jolanda_2.jpg',
        'saw.png',
        'simpsons.gif',
        'south_park.jpg',
        'star.jpg',
        'tenis.jpg',
    ];

    let drawnStudents = {};
    let students = {
        0: 'Simona Bočková',
        1: 'Simona Bučková',
        2: 'Martin Cabák',
        3: 'Tomáš Gracias',
        4: 'Rostislav Hořava',
        5: 'Damián Hruban',
        6: 'David Chovanec',
        7: 'Lukáš Kocmánek',
        8: 'Pavel Kubíček',
        9: 'Pavel Orlíček',
        10: 'Adam Pavelka',
        11: 'Jan Přikryl',
        12: 'Žaneta Rezková',
        13: 'Aneta Ryglová',
        14: 'Jakub Řehák',
        15: 'Ladislav Semrád',
        16: 'Tomáš Štaud',
        17: 'Petr Vodička',
        18: 'Jitka Žáčková',
    };

    let randomNumber;
    let imageNumber;

    $('#draw-student').click(function () {
        randomNumber = Math.floor(Math.random() * 8);
        imageNumber = Math.floor(Math.random() * 10);

        if (Object.keys(drawnStudents).length != 8) {
            while (randomNumber in drawnStudents) {
                randomNumber = Math.floor(Math.random() * 8);
            }
        } else {
            $('td').css('text-decoration', 'none').css('color', 'black');
            drawnStudents = {};
        }

        if (Object.keys(drawnImages).length != 10) {
            while (imageNumber in drawnImages) {
                imageNumber = Math.floor(Math.random() * 10);
            }
        } else {
            drawnImages = {};
        }

        drawnStudents[randomNumber] = students[randomNumber];
        drawnImages[imageNumber] = images[imageNumber];

        $('#student-name').text(students[randomNumber]);
        $('#mem').attr('src', 'images/' + images[imageNumber]);
        $('#' + randomNumber + '').css('text-decoration', 'line-through').css('color', 'red');
    });
</script>
</body>
</html>